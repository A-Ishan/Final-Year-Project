{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nearby Restaurants | FoodHunt</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">üçΩÔ∏è Nearby Restaurants</h1>

        <div class="flex justify-center mb-6">
            <button onclick="getLocation()" 
                class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition">
                üìç Use My Location
            </button>
        </div>

        {% if restaurants %}
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {% for restaurant in restaurants %}
                <div class="bg-white rounded-lg shadow-md p-4">
                    <img src="{{ restaurant.photo }}" alt="{{ restaurant.name }}" class="w-full h-48 object-cover rounded-md">
                    <h2 class="text-xl font-semibold mt-2">{{ restaurant.name }}</h2>
                    <p class="text-gray-600">üìç {{ restaurant.address }}</p>
                    <p class="text-yellow-500 font-bold">‚≠ê {{ restaurant.rating }}/5</p>
                    <a href="https://www.google.com/maps/place/?q=place_id:{{ restaurant.place_id }}" 
                       class="block text-center bg-blue-500 text-white mt-3 py-2 rounded-lg hover:bg-blue-600 transition">
                       View on Map
                    </a>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="text-center text-gray-600">No restaurants found. Try adjusting your location.</p>
        {% endif %}
    </div>

    <script>
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    window.location.href = `/restaurants/scan?lat=${position.coords.latitude}&lng=${position.coords.longitude}`;
                });
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }
    </script>
</body>
</html>
